<html>

<style>
	body {
		width: 100%;
		height: 100%;
		margin: 0;
	}
	
	#item_template {
		background-color: aqua;
		width:100%;
		height: 10%;
		margin-bottom: 10px;
		display:none;	/*Mike: Changed from none to block to work*/
	}
		
	/*Mike: Did the following*/
	.collapsible {
		background-color: #777; /*Makes blocks gray*/
		color: white;			/*Makes words white*/
		padding: 18px;			/*Controls how fat the buttons are horizontal*/
		width:	100%;			/*How wide the buttons are on screen*/
		height: 100%;
		border: none;			/*Change if you want a border; can use -width, -style, -color*/
		text-align: left;		/*Aligns text to the left of gray box*/
		outline: none;
		font-size: 15px;		/*Adjust size of letters*/
	}
	
	/*When hovering over button, or when clicked remains active*/
	.active, .collapsible:hover {
		background-color: green;	/*Button will be green in both scenerios*/
	}
	
	/*Affect the box and its elements*/
	.collapsible:after {
		content: '\002B';		/*Keeps a plus sign before opening on button*/
		color: white;
		font-weight: bold;		/*Makes symbol fatter*/
		float: right;			/*Symbol positions on right of box*/
		margin: 5px;
	}
	
	/*Active means it's been clicked and dropped down*/
	.active:after {
		content: '\002B';		/*Make a minus symbol when exapnds*/
	}
	
	/*Controls the content shown after clicked*/
	.content {
		padding: 0 18px;
		max-height: 0;
		overflow: hidden;		/*IMPORTANT: Hides the content when not active*/
		transition: max-height 0.2s ease-out;	/*Speed content expands when clicked*/
		background-color: #f1f1f1;	/*Background of content*/
	}
	
</style>

<head>
	<script src="jquery-3.4.1.min.js"></script>
	<script>
	
	function addItem(item) {
		var clone = $("#item_template").clone(true);
		
		if(item.status == 1)
		{
			clone.css('display','block'); 
		}
		else
		{	
			clone.css('display','none');
		}
		clone.appendTo('.container');
		clone.children("button").html(item.name);
		clone.children("button").attr("value",item.name);
		clone.children("button").attr("id",item._id.);
		clone.children("div").html(item.description);
		return clone;
	}
	
	<!-- Michael Started Here -->
	function handleStuff(value) {
			//alert("on click");
			var stuff = document.getElementsByClassName("content");
			console.log(parent.window.postMessage(value, '*'));
			
	}
	
	function showContent(){
	var coll = document.getElementsByClassName("collapsible");
	var i;

	for (i = 0; i < coll.length; i++) {
		coll[i].addEventListener("click", function() {
				this.classList.toggle("active");
				var content = this.nextElementSibling;
				if (content.style.maxHeight){
					content.style.maxHeight = null;
				} else {
					content.style.maxHeight = content.scrollHeight + "px";
				}	 
		});
	}
	}
	
	$(document).ready(function() {
            var queryStr = window.location.search; // will give you ?sndReq=234
			
			var category = queryStr.substr(1)
			console.log(category);
			var url = "http://159.89.238.181:8080/api/items?".concat(category);
			$.ajax({
                url: url,
                type: 'get',
                dataType: 'JSON',
                success: function(response) {
                    response.forEach(item => 
                        addItem(item)
                    );
                }
            })
        }); 
	</script>
	
</head>

<body style="background-color:White;">
	<div class = "container" style="width: 100%; height: 100%; overflow: auto; background-color:red">
		<div id ="item_template">
			<button class="collapsible" onclick="showContent(); handleStuff(this.value);">Open Collapsible</button>
			<div class="content">
				<p>Some Text</p>
				<p>Some Text</p>
			</div>
			<!--<p>SOME TEXT</p>-->
		</div>
	</div>
	
	
<script>

</script>
	
</body>
</html>